{% extends "base.html" %}
{% block content %}

    <h3 class="teal-text center-align text-shadow">All Books</h3>

    <div class="row card-panel lighten-5">
        <form action="{{ url_for('search') }}" method="post" class="col s12">
            <div class="row valign-wrapper center-align">
                <div class="input-field col s12 m8">
                    <i class="fas fa-search prefix teal-text text-darken-4"></i>
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search Books</label>
                </div>
                <div class="col s12 m4">
                    <a href="{{ url_for('get_books') }}" class="red btn text-shadow">Reset</a>
                    <button type="submit" class="teal darken-1 btn text-shadow">
                        <i class="fas fa-search left"></i> Search
                    </button>
                </div>
            </div>
        </form>
    </div>

    {% if books|length > 0 %}

    <ul class="collapsible popout">
        {% for book in books %}
        <li>
            <div class="collapsible-header white-text teal text-shadow">
                <div class="col s3">
                    <i class="fas fa-caret-down"></i>
                    
                    
                   
                    {% if session.user | lower == book.created_by | lower %}

                        <!-- Modal Trigger -->
                        <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Delete Book</a>

                        <!-- Modal Structure -->
                        <div id="modal1" class="modal">
                            <div class="modal-content">
                            <h4>Modal Header</h4>
                            <p>A bunch of text</p>
                            </div>
                            <div class="modal-footer">
                            <a href="{{ url_for('delete_book', book_id=book._id) }}" class="waves-effect waves-red btn-small">Agree</a>
                            <a href="{{ url_for('get_books') }}" class="modal-close waves-effect waves-red btn-small">Cancel</a>
                            
                            </div>
                        </div>

                        
                        <a href="{{ url_for('edit_book', book_id=book._id) }}" class="btn-small waves-effect light-green accent-4">Edit</a>
                        
                    {% endif %}
                </div>
                <div class="col s9">
                    <strong>{{ book.book_name }}</strong> : By {{ book.book_author }} | Release:  {{book.book_release}}  | {{ book.book_upvote }}
                </div>
                

                
            </div>
            <div class="collapsible-body">
                <strong>{{ book.category_name }}</strong>
                <!--<div></div>
                <div><img src="https://images-na.ssl-images-amazon.com/images/I/41wBo8-XN7L._AC_SX368_.jpg" alt=""></div>-->
                <p>{{ book.book_description }}</p>
                <p><em>by: {{ book.created_by }}</em></p>
            </div>
        </li>
        
        {% endfor %}
        
    </ul>

    {% else %}
        <h3 class="red-text text-darken-4 center-align">No Results Found</h3>
    {% endif %}

{% endblock %}